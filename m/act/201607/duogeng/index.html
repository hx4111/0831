<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>想多看点漫画就来点赞吧</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="description" content="想多看点漫画就来点赞吧">
		<!--<link rel="stylesheet" href="http://cdn.icomicool.cn/m/act/act-common/css/common.css?t=20160518">-->
		<link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_1463478490_8874226.css">
		<link rel="stylesheet" type="text/css" href="http://cdn.icomicool.cn/m/tpl/css/style.min.css">
		<script src="http://m.comicool.cn/m-common/js/init.js"></script>
		<style type="text/css">
			.img-list img {
				display: table;
				width: 100%;
			}
			
			#praise {
				position: relative;
				width: 100%;
				overflow: hidden;
			}
			
			#praise span {
				position: absolute;
				left: 50%;
				transform: translateX(-50%);
				-webkit-transform: translateX(-50%);
				-moz-transform: translateX(-50%);
				-o-transform: translateX(-50%);
				-ms-transform: translateX(-50%);
				transform: translateX(-50%);
				top: .5rem;
				font-size: 1.3rem;
				color: #fff;
			}
			
			.iconfont {
				z-index: 9999;
				position: relative;
			}
			
			#toast {
				position: fixed;
				bottom: 2rem;
				left: 50%;
				transform: translate3d(-50%, 0, 0);
				-ms-transform: translate3d(-50%, 0, 0);
				-moz-transform: translate3d(-50%, 0, 0);
				-webkit-transform: translate3d(-50%, 0, 0);
				-o-transform: translate3d(-50%, 0, 0);
				border-radius: .3rem;
				background: #000;
				color: #fff;
				padding: .5rem 1rem;
				text-align: center;
				opacity: .7;
				-webkit-tap-highlight-color: transparent;
				/*The good stuff */
				-webkit-transition: opacity 0.5s ease-out;
				/* Saf3.2+, Chrome */
				-moz-transition: opacity 0.5s ease-out;
				/* FF4+ */
				-ms-transition: opacity 0.5s ease-out;
				/* IE10? */
				-o-transition: opacity 0.5s ease-out;
				/* Opera 10.5+ */
				transition: opacity 0.5s ease-out;
				z-index: 9999;
				font-size: .7rem;
				background: #6B6A6A;
			}
		</style>
	</head>

	<body>
		<!-- 一般化分享 -->
		<h1 class="thumbnails" style="display:none">
        想多看点漫画就来点赞吧
        <p>想多看点漫画就来点赞吧</p>
        <img src="http://cdn.icomicool.cn/m/act/201607/duogeng/images/duogeng_share.jpg">
    </h1>
		<div class="loading-spinner"></div>
		<header class="header header-fixed header-shadow">
			<a class="l-icon icon-home iconfont" href="http://m.comicool.cn"></a>
			<i class="r-icon icon-share iconfont"></i>
		</header>
		<!-- 主要内容：开始 -->
		<div class="img-list">

			<li><img src="http://cdn.icomicool.cn/m/act/201607/duogeng/images/index_01.jpg" alt="想多看点漫画就来点赞吧" /></li>
			<li><img src="http://cdn.icomicool.cn/m/act/201607/duogeng/images/index_02.jpg" alt="想多看点漫画就来点赞吧" /></li>
			<li class="go" data-ccid="11383" data-cid="1"><img src="http://cdn.icomicool.cn/m/act/201607/duogeng/images/index_03.jpg" alt="想多看点漫画就来点赞吧" /></li>
			<li><img src="http://cdn.icomicool.cn/m/act/201607/duogeng/images/index_04.jpg" alt="想多看点漫画就来点赞吧" /></li>
			<li id="praise"><span>0</span><img src="http://cdn.icomicool.cn/m/act/201607/duogeng/images/index_05.jpg" alt="想多看点漫画就来点赞吧" /></li>
		</div>
		<div id="post-and-Ctrl"></div>
		<!-- 主要内容：结束 -->
		<!-- 百度分享面板 -->
		<div id="ShareBg"></div>
		<div class="bdsharebuttonbox sharebox" data-tag="share_1">
			<div id="ShareCon">
				<em></em>
				<h2></h2>
			</div>
			<div>
				<a data-cmd="tsina"></a><i class="icon-xinlangweibo iconfont"></i>
				<a data-cmd="sqq"></a><i class="icon-qq iconfont" data-cmd="bds_sqq"></i>
				<a data-cmd="qzone"></a><i class="icon-qqkongjian iconfont" data-cmd="bds_qzone"></i>
				<a data-cmd="douban"></a><i class="icon-douban iconfont" data-cmd="bds_douban"></i>
			</div>
			<div class="share-clo">取消</div>
		</div>
		<script src="http://cdn.icomicool.cn/m/js/base.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="http://m.comicool.cn/tpl/dist/act-global.min.js" type="text/javascript"></script>
		<script>
			ReactDOM.render(React.createElement(PostAndCtrl, {
				postType: "topic2038"
			}), document.getElementById('post-and-Ctrl'));
			setShareInfo({
				title: '想多看点漫画就来点赞吧',
				describe: '想多看点漫画就来点赞吧',
				imageUrl: 'http://cdn.icomicool.cn/m/act/201607/duogeng/images/duogeng_share.jpg',
				pageUrl: window.location.href
			}, {
				use: 'baidu',
				init: initBaiduSharePanel
			});

			function initBaiduSharePanel() {
				var _ = function(selector, parent) {
						return (parent || document).querySelector(selector);
					},
					header = _('.header'),
					trigger = _('.icon-share', header),
					mask = _('#ShareBg'),
					panel = _('.bdsharebuttonbox'),
					wxqq = _('#wxqq'),
					cancelBtn = _('.share-clo', panel),
					panelTitle = _('#ShareCon h2'),
					panelImageCont = _('#ShareCon em'),
					panelImage = new Image(),
					hidePanel = function() {
						mask.style.display = panel.style.display = 'none';
					};
				header.style.display = 'block';
				panelTitle.innerHTML = this.title;
				panelImage.src = this.imageUrl;
				panelImageCont.appendChild(panelImage);
				if (CONFIG.isWeixin || CONFIG.isQQ || CONFIG.isWeibo) {
					trigger.addEventListener('click', function() {
						document.getElementById('ShareBg').style.display = 'block';
						document.getElementById('ShareBg').innerHTML = '<img src="http://cdn.icomicool.cn/m/images/shareTip.png" >';
						header.style.display = 'none';
					});
					document.getElementById('ShareBg').addEventListener('click', function() {
						document.getElementById('ShareBg').style.display = 'none';
						header.style.display = 'block';
					})
				} else {
					trigger.addEventListener('click', function() {
						mask.style.display = panel.style.display = 'block';
					});
					mask.addEventListener('click', hidePanel);
					cancelBtn.addEventListener('click', hidePanel);
				}
			}
			$.ajax({
				url: 'http://comicool.cn/simple_vote.php',
				dataType: "jsonp",
				data: {},
				jsonpCallback: "jsonp_match",
				success: function(data) {
					var praise = data.results[81];
					$("#praise span").html(praise);
					bindOpenComicEvents();
				}
			})

			function bindOpenComicEvents() {
				var readComic;
				if (CONFIG.isApp) {
					readComic = function(ccid, epid) {
						callAppFunction('openEpisodeReaderPage', {
							comic_id: ccid,
							ep_id: 1
						});
					}
				} else {
					readComic = function(ccid) {
						window.location.href = 'http://m.comicool.cn/content/reader.html?comic_id=' + ccid + '&ep_id=1';
					}
				}
				var flag_duogeng = getCookie('flag_duogeng');
				if (flag_duogeng) {
					$("#praise img").attr("src", "http://cdn.icomicool.cn/m/act/201607/duogeng/images/index_055.jpg");
				}
				$(".go").on('click', function(e) {
					var ccid = this.dataset.ccid,
						epid = this.dataset.epid;
					if (ccid !== undefined && ccid !== "") {
						readComic(ccid, epid);
					}
				});
				//				下面的按钮点赞
				$("#praise").on("click", function() {
					//					clearCookie("flag_duogeng")
					if (getCookie('flag_duogeng') == "true") {
						drawToast("您已经点过赞了!");
					} else {
						var num = $("#praise span").html();
						$("#praise span").html(parseInt(num) + 1);
						$.get("http://comicool.cn/simple_vote.php?sel=81");
						$("#praise img").attr("src", "http://cdn.icomicool.cn/m/act/201607/duogeng/images/index_055.jpg");

						setCookie("flag_duogeng", "true", 30)
					}
				})
			}

			function hideToast() {
				var alert = document.getElementById("toast");
				alert.style.opacity = 0;
				clearInterval(intervalCounter);
			}

			function drawToast(message) {
				var alert = document.getElementById("toast");
				if (alert == null) {
					var toastHTML = '<div id="toast">' + message + '</div>';
					document.body.insertAdjacentHTML('beforeEnd', toastHTML);
				} else {
					alert.remove();
					drawToast(message);
				}
				intervalCounter = setInterval("hideToast()", 3000);
			}
			<!-- 百度统计 -->
			var _hmt = _hmt || [];
			(function() {
				var hm = document.createElement("script");
				hm.src = "//hm.baidu.com/hm.js?91ce1b276d999b0757a6bf47b0e86df6";
				var s = document.getElementsByTagName("script")[0];
				s.parentNode.insertBefore(hm, s);
			})();
		</script>
	</body>

</html>